@config "../../../tailwind.config.js";
@import "tailwindcss";

/*
  Salary Book UI base styles

  Goal: match the React prototype (prototypes/salary-book-react) and keep the Rails
  app Tailwind-first.
*/

@layer base {
  /* Light mode (default) â€” Vercel-inspired */
  :root {
    --background: #ffffff;
    --foreground: #171717;
    --muted: #f0f0f0;
    --muted-foreground: #737373;
    --border: #e5e5e5;
    --primary: #171717;
    --primary-foreground: #ffffff;
    --destructive: #dc2626;
    --destructive-foreground: #ffffff;
  }

  /* Dark mode */
  .dark {
    --background: #0a0a0a;
    --foreground: #ededed;
    --muted: #262626;
    --muted-foreground: #a3a3a3;
    --border: #262626;
    --primary: #ededed;
    --primary-foreground: #0a0a0a;
    --destructive: #dc2626;
    --destructive-foreground: #ffffff;
  }

  html,
  body {
    height: 100%;
  }

  body {
    @apply bg-background text-foreground font-sans;
    margin: 0;
    overflow-x: hidden;
    overscroll-behavior-y: contain; /* Prevent pull-to-refresh / bounce */
  }

  code {
    @apply font-mono;
    font-size: 0.95em;
  }
}

@layer components {
  /* Dense, two-level entity table treatment (Salary Book-inspired). */
  .entity-table thead th {
    @apply h-8 align-middle;
  }

  .entity-table tbody tr {
    /* `group` is a marker class, not an @apply utility in Tailwind v4. */
  }

  .entity-table tbody td {
    @apply align-top;
  }

  .entity-cell-two-line {
    @apply grid grid-rows-[20px_14px] min-h-[34px] leading-none;
  }

  .entity-cell-primary {
    @apply h-[20px] flex items-end text-[13px] min-w-0;
  }

  .entity-cell-secondary {
    @apply h-[14px] -mt-px flex items-start text-[10px] text-muted-foreground/80 min-w-0;
  }

  .entity-chip {
    @apply inline-flex items-center rounded px-1.5 py-0.5 text-[10px] leading-none font-medium;
  }

  .entity-chip--muted {
    @apply bg-muted text-muted-foreground;
  }

  .entity-chip--warning {
    @apply bg-amber-100 text-amber-800 dark:bg-amber-900/30 dark:text-amber-400;
  }

  .entity-chip--danger {
    @apply bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-400;
  }

  .entity-chip--success {
    @apply bg-emerald-100 text-emerald-800 dark:bg-emerald-900/30 dark:text-emerald-400;
  }

  .entity-chip--accent {
    @apply bg-purple-100 text-purple-800 dark:bg-purple-900/30 dark:text-purple-400;
  }

  [data-entity-scrollspy-link][data-active="true"] {
    @apply bg-primary/10 text-primary font-medium;
  }
}

@layer utilities {
  /* iOS momentum scrolling for scroll containers */
  .scroll-touch {
    -webkit-overflow-scrolling: touch;
  }

  /* Backdrop blur helper */
  .backdrop-blur-nav {
    -webkit-backdrop-filter: blur(12px);
    backdrop-filter: blur(12px);
  }

  /* Hide scrollbar */
  .scrollbar-hide::-webkit-scrollbar {
    display: none;
  }
  .scrollbar-hide {
    -ms-overflow-style: none;
    scrollbar-width: none;
  }
}

/* Team section fading (scroll-spy) */
[data-header-content] {
  @apply opacity-100 transition-opacity duration-200;
}
[data-faded] [data-header-content] {
  opacity: 0.35;
}

/*
  Right panel overlay behavior

  NOTE: Datastar patches `#rightpanel-overlay` by id, so keep the positioning and
  show/hide behavior id-driven.
*/
#rightpanel-overlay {
  @apply absolute inset-0 overflow-y-auto overflow-x-hidden bg-background z-10 overscroll-y-contain;
  -webkit-overflow-scrolling: touch;

  /* Hidden by default (sidebar_clear returns an empty div). */
  @apply opacity-0 pointer-events-none;
  transition: opacity 150ms ease-out;
}

#rightpanel-overlay:not(:empty) {
  @apply opacity-100 pointer-events-auto;
}

#rightpanel:has(#rightpanel-overlay:not(:empty)) #rightpanel-base-layer {
  @apply opacity-20 grayscale pointer-events-none;
}
