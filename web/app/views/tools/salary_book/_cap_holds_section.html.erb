<%#
  Cap Holds Section — List of cap holds for a team

  Shows:
  - Player name or hold type
  - Cap amount by year (2025-2029)
  - Type badge (Bird, Early Bird, 1st Round, etc.)
%>

<% cap_holds ||= [] %>
<% return if cap_holds.empty? %>

<div class="subsection-rows">
  <% cap_holds.each do |row| %>
    <% title = row["player_name"].presence || row["amount_type_lk"] || "Cap Hold" %>
    <% subtitle = row["player_name"].present? && row["amount_type_lk"].present? ? row["amount_type_lk"] : nil %>

    <div class="subsection-row">
      <%# Sticky label column %>
      <div class="subsection-row-label">
        <div class="subsection-row-label-grid">
          <div></div>
          <div class="subsection-row-label-text">
            <div class="subsection-row-title"><%= title %></div>
            <% if subtitle %>
              <div class="subsection-row-subtitle"><%= subtitle %></div>
            <% end %>
          </div>
        </div>
      </div>

      <%# Year columns %>
      <% SUBSECTION_YEARS.each do |year| %>
        <% amt = cap_hold_amount(row, year) %>
        <% is_empty = amt.nil? || amt.to_f == 0 %>
        <div class="subsection-year-cell <%= 'subsection-year-cell--empty' if is_empty %>">
          <%= is_empty ? "—" : format_compact_currency(amt) %>
        </div>
      <% end %>

      <%# Spacers for Total + Agent columns %>
      <div class="subsection-spacer"></div>
      <div class="subsection-spacer-wide"></div>
    </div>
  <% end %>
</div>
