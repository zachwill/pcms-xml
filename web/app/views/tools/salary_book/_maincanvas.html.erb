<% defer_heavy_load = local_assigns.fetch(:defer_heavy_load, false) %>
<% boot_error = local_assigns.fetch(:boot_error, nil) %>
<% team_codes = local_assigns.fetch(:team_codes, []) %>
<% salary_year = local_assigns.fetch(:salary_year, 2025) %>
<% salary_years = local_assigns.fetch(:salary_years, SalaryBookHelper::SALARY_YEARS) %>
<% players_by_team = local_assigns.fetch(:players_by_team, {}) %>
<% cap_holds_by_team = local_assigns.fetch(:cap_holds_by_team, {}) %>
<% exceptions_by_team = local_assigns.fetch(:exceptions_by_team, {}) %>
<% dead_money_by_team = local_assigns.fetch(:dead_money_by_team, {}) %>
<% picks_by_team = local_assigns.fetch(:picks_by_team, {}) %>
<% team_summaries = local_assigns.fetch(:team_summaries, {}) %>
<% team_meta_by_code = local_assigns.fetch(:team_meta_by_code, {}) %>

<main
  id="maincanvas"
  class="flex-1 min-w-0 overflow-y-auto overflow-x-hidden bg-background relative overscroll-y-contain scroll-touch isolate snap-y snap-proximity"
>
  <% unless defer_heavy_load %>
    <div class="hidden" aria-hidden="true" data-signals="{ bootstrapstatus: 'done' }"></div>
  <% end %>

  <% if defer_heavy_load && boot_error.blank? %>
    <%= render partial: "tools/salary_book/maincanvas_skeleton", locals: {
      team_codes:,
      team_meta_by_code:
    } %>
  <% else %>
    <%= render partial: "tools/salary_book/maincanvas_content", locals: {
      boot_error:,
      team_codes:,
      salary_year:,
      salary_years:,
      players_by_team:,
      cap_holds_by_team:,
      exceptions_by_team:,
      dead_money_by_team:,
      picks_by_team:,
      team_summaries:,
      team_meta_by_code:
    } %>
  <% end %>
</main>
