<%# TableHeader â€” Tailwind port of the React prototype %>

<% salary_years ||= SalaryBookHelper::SALARY_YEARS %>
<% base_year = local_assigns.fetch(:base_year, salary_years.first) %>

<div class="border-b border-border bg-background">
  <div
    class="h-8 flex items-center text-xs font-medium text-muted-foreground select-none cursor-default"
    data-on:mouseleave="if ($selectedseason !== null) { $selectedseason = null; if ($activeteam) { @get('<%= tools_salary_book_sidebar_team_path(team: '__TEAM__') %>'.replace('__TEAM__', $activeteam) + '&year=<%= base_year %>'); } }"
    data-on:focusout="if (!el.contains(evt.relatedTarget) && $selectedseason !== null) { $selectedseason = null; if ($activeteam) { @get('<%= tools_salary_book_sidebar_team_path(team: '__TEAM__') %>'.replace('__TEAM__', $activeteam) + '&year=<%= base_year %>'); } }"
  >
    <%# Player column (sticky left) %>
    <div
      class="w-52 shrink-0 pl-4 sticky left-0 z-[2] bg-background relative
             after:absolute after:right-0 after:top-0 after:bottom-0 after:w-px after:bg-border/50"
    >
      <div class="grid grid-cols-[40px_1fr] items-center h-full">
        <div></div>
        <div class="pl-1">Name / Details</div>
      </div>
    </div>

    <%# Year columns %>
    <% salary_years.each do |year| %>
      <div
        class="w-24 tabular-nums text-center transition-colors duration-100 cursor-default select-none"
        data-on:mouseenter="if (Number($selectedseason) !== <%= year %>) { $selectedseason = <%= year %>; if ($activeteam) { @get('<%= tools_salary_book_sidebar_team_path(team: '__TEAM__') %>'.replace('__TEAM__', $activeteam) + '&year=' + $selectedseason); } }"
        data-on:focusin="if (Number($selectedseason) !== <%= year %>) { $selectedseason = <%= year %>; if ($activeteam) { @get('<%= tools_salary_book_sidebar_team_path(team: '__TEAM__') %>'.replace('__TEAM__', $activeteam) + '&year=' + $selectedseason); } }"
        data-class="{ 'bg-yellow-50/70 dark:bg-yellow-900/10 text-foreground': Number($selectedseason) === <%= year %> }"
      ><%= format_year_label(year) %></div>
    <% end %>

    <%# Total column %>
    <div class="w-24 tabular-nums text-center font-semibold">Total</div>

    <%# Agent column %>
    <div class="w-40 text-center">Agent</div>
  </div>
</div>
