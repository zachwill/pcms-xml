<% content_for :title, "Noah" %>
<% loading_year = SalaryBookHelper::SALARY_YEARS.first %>

<div
  id="noah-workspace"
  class="h-screen w-full flex flex-col overflow-hidden bg-background"
  style="height: 100dvh;"
>
  <div id="flash"></div>

  <header id="commandbar" class="shrink-0 h-[130px] border-b border-border bg-background px-4 pt-3 flex items-start gap-4 select-none">
    <div class="flex-1 min-w-0 space-y-1">
      <h1 class="text-sm font-semibold tracking-wide uppercase">Noah</h1>
      <p class="text-[11px] text-muted-foreground">Rip City workspace shell (Salary Book Injuries-style scaffold).</p>

      <div class="pt-1 flex items-center gap-2 text-[10px] uppercase tracking-wider text-muted-foreground/70">
        <span class="rounded border border-border bg-muted/40 px-1.5 py-0.5">Command Bar</span>
        <span class="rounded border border-border bg-muted/40 px-1.5 py-0.5">Main Canvas</span>
        <span class="rounded border border-border bg-muted/40 px-1.5 py-0.5">Sidebar</span>
      </div>
    </div>

    <div class="h-20 w-px bg-border self-center ml-auto shrink-0"></div>
    <%= render partial: "shared/commandbar_navigation", locals: { active_destination: "noah" } %>
  </header>

  <div id="viewport" class="flex flex-1 overflow-hidden relative">
    <main
      id="maincanvas"
      class="flex-1 min-w-0 overflow-y-auto overflow-x-hidden bg-background relative overscroll-y-contain scroll-touch isolate"
    >
      <%= render partial: "salary_book/maincanvas_loading_frame", locals: {
        team_meta_by_code: {},
        year: loading_year,
        surface_label: "Noah",
        error_title: "Unable to load Noah surface",
        error_detail: "Failed while building Noah loading board.",
        frame_id: "noah-main-frame"
      } %>
    </main>

    <aside
      id="rightpanel"
      class="w-[30%] min-w-[320px] max-w-[480px] border-l border-border bg-background overflow-hidden relative"
    >
      <div
        id="rightpanel-base-layer"
        class="absolute inset-0 overflow-y-auto overflow-x-hidden overscroll-y-contain scroll-touch pt-2 px-4 pb-4"
      >
        <div id="rightpanel-base" class="space-y-4">
          <div class="rounded border border-border bg-muted/20 p-3">
            <div class="text-[10px] font-semibold uppercase tracking-wider text-muted-foreground/70">Noah Sidebar</div>
            <p class="mt-2 text-sm text-muted-foreground">Sidebar scaffold is in place for upcoming Noah context.</p>
          </div>
        </div>
      </div>

      <div id="rightpanel-overlay"></div>
    </aside>
  </div>
</div>
