<% content_for :title, "Agents" %>

<% pane_get_expr = "@get('/agents/pane?kind=' + $entitykind + '&active_only=' + ($activeonly ? '1' : '0'))" %>
<% active_scope = @directory_kind == "agencies" ? "agencies" : "agents" %>

<main
  class="max-w-5xl mx-auto px-4 py-6 space-y-6"
  data-signals="{ entitykind: '<%= @directory_kind %>', activeonly: <%= @active_only ? 'true' : 'false' %> }"
>
  <%= render partial: "entities/shared/entity_header", locals: {
    title: "Representation",
    subtitle: "Agent and agency directory (from pcms.agents + pcms.agencies).",
    breadcrumbs: [["Agents", nil]],
    active_entity_scope: active_scope,
    search_enabled: false,
    header_knobs: [
      {
        label: "Directory",
        options: [
          {
            type: "radio",
            name: "entity-kind",
            id: "directory-kind-agents",
            value: "agents",
            label: "Agents",
            checked: @directory_kind == "agents",
            bind: "entitykind",
            on_change: pane_get_expr
          },
          {
            type: "radio",
            name: "entity-kind",
            id: "directory-kind-agencies",
            value: "agencies",
            label: "Agencies",
            checked: @directory_kind == "agencies",
            bind: "entitykind",
            on_change: pane_get_expr
          }
        ]
      },
      {
        label: "Filters",
        options: [
          {
            type: "checkbox",
            id: "directory-filter-active-only",
            label: "Active only",
            checked: @active_only,
            bind: "activeonly",
            on_change: pane_get_expr
          }
        ]
      }
    ]
  } %>

  <%= render partial: "entities/agents/directory_results" %>
</main>
