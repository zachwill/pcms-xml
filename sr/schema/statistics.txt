### season_team_statistics

Aggregated seasonal statistics for teams. This table covers regular season totals, postseason totals, and series-specific statistics.

- season_id text NOT NULL — FK to `sr.seasons`
- sr_team_id text NOT NULL — FK to `sr.teams`
- series_id text — Optional: FK to a playoff series (NBA)
- tournament_id text — Optional: FK to a tournament (NCAA)
- is_opponent boolean DEFAULT false — If true, these are stats accumulated BY opponents AGAINST this team
- source_api text NOT NULL
- games_played integer
- minutes text — Total minutes (e.g., "11570:00")
- fgm integer
- fga integer
- fg_pct numeric(5,2)
- fg3m integer
- fg3a integer
- fg3_pct numeric(5,2)
- fg2m integer — Calculated: fgm - fg3m
- fg2a integer — Calculated: fga - fg3a
- fg2_pct numeric(5,2) — Calculated: fg2m / fg2a
- ftm integer
- fta integer
- ft_pct numeric(5,2)
- oreb integer
- dreb integer
- reb integer
- ast integer
- stl integer
- blk integer
- tov integer
- pf integer
- tech_fouls integer
- flagrant_fouls integer
- pts integer
- pts_avg numeric(5,2) — Points per game
- efficiency numeric(5,2)
- ts_att numeric(7,2)
- ts_pct numeric(5,2)
- efg_pct numeric(5,2)
- pts_in_paint integer
- fast_break_pts integer
- second_chance_pts integer
- pts_off_turnovers integer
- statistics_json jsonb — The full raw statistics block from SportRadar
- PRIMARY KEY (season_id, sr_team_id, is_opponent) WHERE series_id IS NULL
- UNIQUE (season_id, sr_team_id, series_id, is_opponent) WHERE series_id IS NOT NULL

### season_player_statistics

Aggregated seasonal statistics for players. This includes totals and averages for a specific season or playoff series.

- season_id text NOT NULL — FK to `sr.seasons`
- sr_team_id text NOT NULL — FK to `sr.teams`
- sr_id text NOT NULL — FK to `sr.players`
- series_id text — Optional: FK to a playoff series (NBA)
- tournament_id text — Optional: FK to a tournament (NCAA)
- source_api text NOT NULL
- games_played integer
- games_started integer
- minutes text
- minutes_avg numeric
- fgm integer
- fga integer
- fg_pct numeric(5,2)
- fg3m integer
- fg3a integer
- fg3_pct numeric(5,2)
- fg2m integer — Calculated: fgm - fg3m
- fg2a integer — Calculated: fga - fg3a
- fg2_pct numeric(5,2) — Calculated: fg2m / fg2a
- ftm integer
- fta integer
- ft_pct numeric(5,2)
- oreb integer
- dreb integer
- reb integer
- reb_avg numeric(5,2)
- ast integer
- ast_avg numeric(5,2)
- stl integer
- stl_avg numeric(5,2)
- blk integer
- blk_avg numeric(5,2)
- tov integer
- tov_avg numeric(5,2)
- pf integer
- tech_fouls integer
- pts integer
- pts_avg numeric(5,2)
- efficiency numeric(5,2)
- ts_att numeric(7,2)
- ts_pct numeric(5,2)
- efg_pct numeric(5,2)
- double_doubles integer
- triple_doubles integer
- statistics_json jsonb — The full raw statistics block from SportRadar
- PRIMARY KEY (season_id, sr_team_id, sr_id) WHERE series_id IS NULL
- UNIQUE (season_id, sr_team_id, sr_id, series_id) WHERE series_id IS NOT NULL

### season_team_splits

Statistics for a team filtered by various criteria (Home/Road, Wins/Losses, Monthly, etc.).

- season_id text NOT NULL
- sr_team_id text NOT NULL
- split_type text NOT NULL — e.g., 'home', 'road', 'wins', 'losses', 'month', 'vs_conf', 'days_rest'
- split_value text NOT NULL — e.g., 'true', 'January', 'Western', '2'
- is_opponent boolean DEFAULT false
- source_api text NOT NULL
- games_played integer
- wins integer
- losses integer
- win_pct numeric(5,3)
- pts integer
- pts_avg numeric(5,2)
- fgm integer
- fga integer
- fg_pct numeric(5,2)
- fg3m integer
- fg3a integer
- fg3_pct numeric(5,2)
- fg2m integer — Calculated: fgm - fg3m
- fg2a integer — Calculated: fga - fg3a
- fg2_pct numeric(5,2) — Calculated: fg2m / fg2a
- reb_avg numeric(5,2)
- ast_avg numeric(5,2)
- tov_avg numeric(5,2)
- statistics_json jsonb — Full split statistics block
- PRIMARY KEY (season_id, sr_team_id, split_type, split_value, is_opponent)

### season_player_splits

Statistics for a player filtered by various criteria.

- season_id text NOT NULL
- sr_team_id text NOT NULL
- sr_id text NOT NULL
- split_type text NOT NULL — e.g., 'month', 'last_10', 'vs_opponent'
- split_value text NOT NULL
- source_api text NOT NULL
- games_played integer
- games_started integer
- minutes_avg numeric(5,2)
- pts_avg numeric(5,2)
- fgm integer
- fga integer
- fg_pct numeric(5,2)
- fg3m integer
- fg3a integer
- fg3_pct numeric(5,2)
- fg2m integer — Calculated: fgm - fg3m
- fg2a integer — Calculated: fga - fg3a
- fg2_pct numeric(5,2) — Calculated: fg2m / fg2a
- reb_avg numeric(5,2)
- ast_avg numeric(5,2)
- statistics_json jsonb — Full split statistics block
- PRIMARY KEY (season_id, sr_team_id, sr_id, split_type, split_value)

NOTES:
- Statistics are derived from "Seasonal Statistics", "Splits", and "Series Statistics" endpoints.
- `series_id` is used to distinguish between overall season stats and those specific to a playoff series.
- `split_type` and `split_value` allow for flexible storage of all SportRadar split variants (Game, Hierarchy, In-game, Schedule).
- `is_opponent` in team tables stores how opponents performed against the target team, which is a standard part of SportRadar's team statistics payloads.
- Wide columns provide immediate access to the most common metrics, while `statistics_json` preserves the complete high-fidelity data including advanced metrics that may vary by league.
- `fg2m`, `fg2a`, and `fg2_pct` are explicitly stored and should be calculated during ingestion if not provided by the API.
- Primary keys and unique constraints are designed to support `ON CONFLICT` updates during incremental ingestion.
